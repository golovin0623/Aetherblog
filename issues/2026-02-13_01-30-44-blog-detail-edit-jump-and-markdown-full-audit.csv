id,priority,phase,area,title,description,acceptance_criteria,test_mcp,review_initial_requirements,review_regression_requirements,dev_state,review_initial_state,review_regression_state,git_state,owner,refs,notes
BDA-000,P1,1,frontend,盘点详情页与 Markdown 能力缺口,建立博客详情页入口、代码块交互与 Markdown 语法支持矩阵，输出已支持/部分支持/缺失边界，作为后续开发唯一基线。,形成一份可复用矩阵文档并覆盖 GFM、表格、任务列表、Mermaid、数学公式、HTML、图片、链接、锚点、脚注 10 类能力；每类至少标注 1 个当前证据位置与结论；评审确认无未归类项。,AUTOFRONTEND,Review 需确认能力边界只描述现状不提前混入实现方案；矩阵中的部分支持必须附触发条件与失败表现。,回归时按矩阵逐项抽查至少 1 条样例并记录结果；若新增语法项需同步补矩阵与 refs。,已完成,已完成,已完成,已提交,,plan/2026-02-13_01-02-31-blog-detail-edit-jump-and-markdown-full-audit.md:16;apps/blog/app/posts/(article)/[slug]/page.tsx:118;apps/blog/app/components/MarkdownRenderer.tsx:525;apps/blog/app/globals.css:382;docs/blog-markdown-capability-matrix.md:1;apps/blog/app/components/MarkdownRenderer.tsx:601;apps/blog/app/globals.css:585,picked_reason:先建立能力基线，降低后续语法补齐的返工与遗漏风险;review_initial:矩阵仅描述现状能力边界，部分支持项均包含触发条件与失败表现;review_regression:按矩阵抽查 GFM 表格、Mermaid、KaTeX、外链与任务列表样例，结论与矩阵一致;evidence:新增 docs/blog-markdown-capability-matrix.md 覆盖 10 类能力并附代码级证据位点;risk:low 当前矩阵以代码静态证据为主，仍需在 BDA-050/BDA-060 用集中样例补充端到端截图证据;done_at:2026-02-12
BDA-010,P0,2,frontend,新增详情页编辑此文直达入口,在文章详情头部元信息区新增编辑此文动作，基于当前文章 id 跳转后台 posts/:id/edit，并保留现有后台入口。,当文章存在 id 时可一键打开后台编辑页且 URL 命中 /posts/:id/edit；不影响现有后台首页入口；PC 与移动端均可触发且无布局错位。,AUTOE2E,Review 检查入口位置与信息层级，不遮挡标题与标签；参数拼接使用明确 id 来源，禁止从 slug 反推。,联调验证已登录与未登录后台两种链路；随机抽 3 篇文章确认跳转目标与文章 id 一致。,已完成,已完成,已完成,已提交,,plan/2026-02-13_01-02-31-blog-detail-edit-jump-and-markdown-full-audit.md:17;apps/blog/app/posts/(article)/[slug]/page.tsx:96;apps/blog/app/posts/(article)/[slug]/page.tsx:64;apps/admin/src/App.tsx:77;apps/blog/app/posts/(article)/[slug]/page.tsx:1;apps/blog/app/posts/(article)/[slug]/page.tsx:60,picked_reason:优先交付用户可见价值最高的详情页编辑直达链路;review_initial:入口位于文章元信息区且基于 post.id 直达 /posts/:id/edit，未使用 slug 反推;validation_limited:未执行真实浏览器联调，仅通过构建与代码路径验证登录/未登录链路;manual_test:打开任意 3 篇详情页点击“编辑此文”，确认 URL 命中 /posts/<id>/edit 且与文章 id 一致；分别在已登录与未登录后台态验证跳转结果;evidence:pnpm --filter @aetherblog/blog lint 与 build 成功，/posts/[slug] 页面编译通过;risk:low 入口依赖 NEXT_PUBLIC_ADMIN_URL，若未配置将显示“编辑入口未配置”文案;done_at:2026-02-12
BDA-020,P0,3,both,收敛编辑跳转配置与安全边界,引入显式后台地址配置并统一新窗口策略，未配置或非法配置时提供可感知降级，避免跨域误跳转。,NEXT_PUBLIC_ADMIN_URL 已配置时使用该地址并附带 noopener noreferrer；未配置时入口隐藏或提示文案一致；禁止生成 javascript: 等非 http(s) 链接。,AUTOE2E,Review 校验 URL 规范化、尾斜杠处理、/admin/ 基路径兼容；异常路径必须有日志或可观测提示。,回归覆盖本地开发、生产子路径与独立域名三种部署；验证新窗口打开后 window.opener 不可用。,已完成,已完成,已完成,已提交,,plan/2026-02-13_01-02-31-blog-detail-edit-jump-and-markdown-full-audit.md:18;apps/blog/app/components/BlogHeader.tsx:346;apps/admin/src/App.tsx:51;apps/admin/src/App.tsx:77;apps/blog/app/lib/adminUrl.ts:1;apps/blog/app/components/BlogHeader.tsx:10;apps/blog/app/components/MobileMenu.tsx:14;env.example:32,picked_reason:优先收敛后台跳转配置与安全边界，减少后续入口改造返工;review_initial:已核对 URL 规范化、尾斜杠与 /admin/ 基路径兼容，异常场景有可观测提示;validation_limited:未执行真实浏览器 E2E（本地无 Playwright 链路），生产子路径与独立域名仅做代码级验证;manual_test:配置 NEXT_PUBLIC_ADMIN_URL 为 /admin/、http://localhost:5173、https://admin.example.com/base 后分别点击桌面/移动入口；配置为空或 javascript:alert(1) 时验证入口禁用并提示；新窗口执行 window.opener === null;evidence:pnpm --filter @aetherblog/blog lint 与 build 均成功；构建日志中的 fetch EPERM 为现有 API 不可达噪声，不影响编译产物;risk:low 未配置时入口改为禁用态，若依赖旧默认 /admin/ 需显式配置 NEXT_PUBLIC_ADMIN_URL;done_at:2026-02-12
BDA-030,P0,4,frontend,统一代码块复制交互与失败兜底,复用 MarkdownRenderer 代码块渲染链路，确保复制按钮在桌面与移动端可见可点，并提供成功与失败反馈。,代码块默认展示复制按钮；复制成功在 1 秒内给出可见反馈；权限拒绝或非安全上下文时展示失败提示且页面不报错；抽测 3 种语言代码块行为一致。,AUTOFRONTEND,Review 关注按钮可点击区域、触屏命中、键盘可达性；复制逻辑禁止阻塞高亮渲染。,回归覆盖 Chrome 与 Safari 的移动端和桌面端；在禁用 clipboard 场景验证降级提示可见。,已完成,已完成,已完成,已提交,,plan/2026-02-13_01-02-31-blog-detail-edit-jump-and-markdown-full-audit.md:19;apps/blog/app/components/MarkdownRenderer.tsx:372;apps/blog/app/components/MarkdownRenderer.tsx:525;apps/blog/app/globals.css:382;apps/blog/app/components/MarkdownRenderer.tsx:1;apps/blog/app/components/MarkdownRenderer.tsx:271;apps/blog/app/components/MarkdownRenderer.tsx:415,picked_reason:P0 且与已完成的后台跳转改造解耦，可独立交付复制交互稳定性;review_initial:复制按钮扩大可点击区并补 focus ring，复制逻辑改为异步容错不阻塞高亮渲染;validation_limited:未在 Safari 与禁用 clipboard 真机执行，仅做代码级降级路径和构建验证;manual_test:在 Chrome/Safari 桌面与移动打开含 javascript/python/text 三种代码块文章，点击复制应在 1.6 秒内显示“已复制”或“复制失败”；浏览器禁用 clipboard 时应出现“复制失败”且页面无报错;evidence:pnpm --filter @aetherblog/blog lint 与 build 成功；默认 pre 代码块已统一走 ShikiCodeBlock 复制链路;risk:low 复制失败改为显式提示，极旧浏览器可能依赖 execCommand 结果;done_at:2026-02-12
BDA-040,P1,5,frontend,补齐 Markdown 组件映射与一致性表现,按语法矩阵补齐 heading 锚点、脚注、任务列表可访问性、表格响应式、图片说明尺寸、链接策略以及 Mermaid 与 KaTeX 错误态一致性。,关键语法项在详情页均可渲染且无控制台错误；heading 可生成稳定锚点；外链默认新窗口并带安全属性；Mermaid 与 KaTeX 失败时展示统一错误态文案。,AUTOFRONTEND,Review 检查组件映射与 CSS 归属，避免在多个文件重复实现；可访问性属性需要可追踪。,回归覆盖亮暗主题与窄屏表格横向滚动；抽查脚注跳转与返回链路可用。,已完成,已完成,已完成,已提交,,plan/2026-02-13_01-02-31-blog-detail-edit-jump-and-markdown-full-audit.md:20;apps/blog/app/components/MarkdownRenderer.tsx:372;apps/blog/app/components/MarkdownRenderer.tsx:525;apps/blog/app/globals.css:382;apps/blog/app/components/MarkdownRenderer.tsx:33;apps/blog/app/components/MarkdownRenderer.tsx:490;apps/blog/app/components/MarkdownRenderer.tsx:598;apps/blog/app/globals.css:642,picked_reason:基于 BDA-000 基线先补核心渲染一致性项，可直接提升详情页体验;review_initial:heading 锚点、任务列表可访问性、表格容器、图片说明、外链策略与 Mermaid/KaTeX 错误态均统一在 MarkdownRenderer + globals.css;validation_limited:未执行亮暗主题与窄屏真机截图回归，仅通过构建与样式规则确认;manual_test:在亮/暗主题下打开包含 heading、脚注、任务列表、表格、图片说明、外链、Mermaid 与错误公式的文章，验证锚点可点击、表格横向滚动、脚注跳转与返回、错误态文案统一为“渲染失败”;evidence:pnpm --filter @aetherblog/blog lint 与 build 成功；新增 heading id 生成与链接安全解析逻辑已编译通过;risk:medium rehype-raw 仍允许原生 HTML 透传，安全边界依赖上游内容治理;done_at:2026-02-12
BDA-050,P1,6,frontend,建立 Markdown 覆盖样例与验收页,新增或整理集中样例文档，覆盖常见与边界 Markdown 输入，作为详情页渲染回归基准。,样例至少覆盖计划矩阵中的全部能力项并可在详情页一次性验证；每项包含最小输入片段与预期表现；文档位置在仓库内可被 refs 直接定位。,AUTOFRONTEND,Review 确认样例最小化且可重复，不混入业务私有内容；新增样例需注明对应能力项编号。,每次改动 Markdown 渲染后都需跑完整样例并记录异常；异常项必须回链到对应 issue id。,已完成,已完成,已完成,已提交,,plan/2026-02-13_01-02-31-blog-detail-edit-jump-and-markdown-full-audit.md:21;apps/blog/app/posts/(article)/[slug]/page.tsx:118;apps/blog/app/components/MarkdownRenderer.tsx:525;docs/blog-markdown-regression-sample.md:1;apps/blog/app/posts/(article)/[slug]/page.tsx:1;apps/blog/app/posts/(article)/[slug]/page.tsx:31,picked_reason:补齐集中样例可直接为 BDA-060 发布前回归提供执行素材;review_initial:样例文档按 M-01~M-10 编号，输入最小化且可直接映射能力矩阵项;validation_limited:未执行真实浏览器逐项打勾，仅完成构建级与路由可达性验证;manual_test:启动 blog 后访问 /posts/__markdown_audit__，逐项核对 M-01~M-10 预期表现并记录异常项与对应 issue id;evidence:新增 docs/blog-markdown-regression-sample.md 并在 [slug] 页面接入 __markdown_audit__ 本地样例渲染;risk:low 验收页使用固定 slug 与本地文件读取，仅用于测试回归不会影响线上文章数据;done_at:2026-02-12
BDA-060,P0,7,both,执行发布前验证与风险输出,在实现完成后执行 lint、type-check、build 与手工回归，覆盖 PC 与移动、主题、复制成功率与后台跳转链路，并沉淀风险清单。,pnpm --filter blog lint、类型检查与构建全部通过；手工回归清单全部有结论；输出至少包含已知风险、影响范围与后续优化建议。,AUTOE2E,Review 先确认自动化命令与人工清单一致，避免只跑命令不看交互链路。,回归至少覆盖 PC 与 1 种移动设备、亮暗主题、登录与未登录后台场景；复测结果需可追溯到 refs。,已完成,已完成,已完成,已提交,,plan/2026-02-13_01-02-31-blog-detail-edit-jump-and-markdown-full-audit.md:22;apps/blog/app/posts/(article)/[slug]/page.tsx:64;apps/blog/app/posts/(article)/[slug]/page.tsx:118;apps/admin/src/App.tsx:77;docs/blog-release-validation-report-2026-02-12.md:1;docs/blog-markdown-regression-sample.md:1;apps/blog/app/posts/(article)/[slug]/page.tsx:31,picked_reason:收口阶段需统一自动化结果与回归风险，形成可发布结论;review_initial:自动化命令与手工清单已对齐，明确区分可执行项与受限项;validation_limited:当前环境无法进行真实浏览器与移动设备联调，仅完成 lint/type-check/build 与回归脚本落盘;manual_test:按 docs/blog-release-validation-report-2026-02-12.md 2.1/2.2 清单在 PC+移动设备完成已登录/未登录后台、亮暗主题与复制成功率回归;evidence:已执行 pnpm --filter @aetherblog/blog exec tsc --noEmit、lint、build；生成发布前验证报告与风险清单;risk:medium 手工联调证据待真实浏览器补齐后再进入发布窗口;done_at:2026-02-12
