# =============================================================================
# AetherBlog Production Environment Configuration
# =============================================================================
# 使用方法:
# 1. 复制此文件为 .env
#    cp env.example .env
# 2. 修改 .env 中的配置项
# 3. 启动服务: docker-compose -f docker-compose.prod.yml up -d
# =============================================================================

# -----------------------------------------------------------------------------
# 部署配置 (Deployment)
# -----------------------------------------------------------------------------
# Docker 镜像仓库用户/组织 (用于拉取镜像)
DOCKER_REGISTRY=golovin0623

# 部署版本 (默认为 latest，CI构建通常为 main-xxxx)
VERSION=latest

# -----------------------------------------------------------------------------
# 端口配置 (Ports)
# -----------------------------------------------------------------------------
# [必填] 统一入口网关端口 (通过此端口访问所有服务)
GATEWAY_PORT=7899

# [可选] 独立服务直接访问端口 (仅供调试或特殊网络拓扑使用)
# BLOG_PORT=7893
# ADMIN_PORT=7894
# POSTGRES_PORT=7895
# REDIS_PORT=6379

# -----------------------------------------------------------------------------
# 数据库 (Database)
# -----------------------------------------------------------------------------
# PostgreSQL 密码
POSTGRES_PASSWORD=aetherblog123

# Redis 配置 (默认连接 Docker 内部 redis 容器)
# 如果使用外部 Redis，请修改 REDIS_HOST 为真实 IP
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=

# -----------------------------------------------------------------------------
# AI 服务 (AI Service) - Python FastAPI
# -----------------------------------------------------------------------------
# 注意: 以下 AI 模型配置均为【可选】的系统级兜底配置。
# 推荐做法: 在系统启动后，登录管理后台 "AI 配置" 页面进行可视化配置 (支持多模型路由、动态切换)。

# OpenAI API 密钥 (仅作为兜底配置，可选)
OPENAI_API_KEY=sk-proj-mock-key-for-testing

# OpenAI 接口地址 (可选)
# OPENAI_BASE_URL=https://api.openai.com

# 兼容模型 API (如 DeepSeek, 通义千问等)
# OPENAI_COMPAT_BASE_URL=https://api.deepseek.com
# OPENAI_COMPAT_API_KEY=sk-xxx

# AI 服务运行模式
# true: 使用模拟响应 (不消耗 Token)
# false: 真实调用 LLM
AI_MOCK_MODE=false

# 安全认证 (JWT)
# 必须设置一个强随机字符串
JWT_SECRET=change-me-to-a-secure-random-string
AI_JWT_MODE=HMAC
AI_JWT_SECRET=change-me-to-a-secure-random-string
# AI_JWT_JWKS_URL=
# AI_JWT_ISSUER=
# AI_JWT_AUDIENCE=

# 刷新令牌与 Cookie 安全配置
JWT_REFRESH_EXPIRATION=604800000
AUTH_COOKIE_SECURE=true
AUTH_COOKIE_SAME_SITE=Strict
# 逗号分隔，生产环境请填写你的后台来源域名
CORS_ALLOWED_ORIGINS=https://yourdomain.com,http://localhost:7899

# -----------------------------------------------------------------------------
# 其他配置 (Misc)
# -----------------------------------------------------------------------------
# Flyway 数据库迁移校验
# true (生产推荐): 严格校验。如果已执行过的 SQL 文件被修改（Checksum 不匹配），启动会报错。确保环境一致性。
# false (开发推荐): 宽松模式。允许修改已执行过的 SQL 文件（如直接改 V1__init.sql），不会报错。适合开发阶段频繁调整表结构。
FLYWAY_VALIDATE=false
