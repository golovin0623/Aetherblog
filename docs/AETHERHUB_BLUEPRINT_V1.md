# AetherHub 顶层蓝图 V1

> 版本: V1.0  
> 目标: 明确 AetherHub 的顶层设计、域模型与迭代边界  
> 说明: 本文为设计蓝图，不包含实施细节

---

## 1. 定位与愿景

**AetherHub** 是与 Blog 平行的独立产品线，定位为“AI 驱动的创作工作台 + 私有知识库”。  
它以任务编排与成果产出为核心，而非单纯对话工具。

**核心价值：**
- AI 驱动的内容产出与知识沉淀
- 可追溯、可审计的过程管理
- 多租户、多团队、多角色协作
- 产物可选择推送至 Blog

---

## 2. 设计原则

- **过程可追溯**：所有任务、产物与来源可追踪
- **权限可控**：RBAC + ABAC 双机制
- **多租户隔离**：同库同表 + 逻辑隔离
- **AI 能力即服务**：模型接入通过独立 AI 服务统一路由
- **产物优先**：对话服务于成果，而非相反

---

## 3. 交互模式与布局

### 3.1 模式一：全自动驱动（默认）
- 用户输入目标
- 主 Agent 生成 Plan 与 Tasks
- 并行执行 + 过程汇总
- 自动生成成果与摘要

### 3.2 模式二：人工干预协作
- 任务执行可暂停
- 用户可修改计划或中断支线
- 支持手动继续或重新派发

### 3.3 三栏布局（左 / 中 / 右）
- **左侧**：主 Agent 对话与任务状态反馈
- **中间**：任务编排画布（Agent/Task/DAG 展开）
- **右侧**：成果预览与来源标注（最终产物、可追溯路径）

---

## 4. 域模型与核心实体

### 4.1 组织与身份体系
- Tenant -> Team -> Project -> Space
- User / Role / Policy
- 支持 SSO/OIDC 与本地超级管理员兜底

### 4.2 执行与过程模型
- Plan / Task / Run / Agent
- Run 为执行实例，拥有完整审计与成本统计

### 4.3 成果模型
- Artifact（成果实体）
- Note（私有笔记，独立实体）
- Publication（与 Blog 的关联发布实体）

### 4.4 数据来源与连接器
- Source（来源元数据）
- Connector（MCP 工具/外部系统）

---

## 5. 权限与治理

### 5.1 RBAC + ABAC
- RBAC 控动作权限
- ABAC 控资源范围（Tenant/Team/Project/Space）

### 5.2 工具授权策略
- 默认请求用户批准
- 支持一次性授权 / 自动授权 / 本次任务授权
- 授权均需审计与可追溯

---

## 6. 记忆与知识库

### 6.1 记忆分层
- 短期对话记忆
- 长期向量知识库

### 6.2 归档策略（可配置）
- 默认永久保留
- 支持定期清理
- 支持冷热分层存储

---

## 7. 预算与配额

- 按租户 / 用户 / 任务逐级限制（包含关系）
- 支持软限额弹性超出
- 达软限额触发降级（模型/并发/频率）
- 达硬限额阻断执行

---

## 8. 多 Agent 编排与合并策略

### 8.1 任务终止规则
- 目标达成 -> 终止
- 失败次数达到阈值 -> 终止
- 强项代理判定终止

### 8.2 合并策略
- 过程数据归档留存
- 关键信息摘要合并
- 产物保留链接/API 追溯完整过程

---

## 9. 可观测性与异常处理

- Run 级日志 + 成本统计
- 工具调用审计
- 失败回滚或“半成品收敛”
- 异常可由监控代理接管

---

## 10. Blog 关联与发布流程

- Note 为独立成果实体
- 可选择推送至 Blog
- 发布必须人工审核确认
- 推送生成关联版本并保留来源标注

---

## 11. MVP 范围（建议）

### 11.1 核心能力
- 对话 + Plan/Task 基础编排
- 私有笔记产出
- 来源追溯
- 基础权限体系（Tenant/Team/Project/Space）

### 11.2 连接器优先级
- 搜索
- 笔记系统
- MCP 生态工具（优先复用）

---

## 12. 演进路线（概要）

### Phase 1 (MVP)
- 基础对话
- 单 Agent 执行
- 私有笔记产出

### Phase 2 (Beta)
- 多 Agent 并行
- 任务画布可视化
- 归档与审计

### Phase 3 (GA)
- 全权限治理
- 丰富连接器
- Blog 发布全流程

---

## 13. 需要后续明确的细化项

- 多租户数据隔离落地方式（RLS/逻辑隔离/独立库）
- 连接器 SDK 与安全审计策略
- 任务合并的“可信摘要”策略
- 成果展示与版本化规范
